(this.webpackJsonptemp1=this.webpackJsonptemp1||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=(n(94),n(95),n(96),n(77)),l=n(22),s=n(154),u=n(153),p=n(17),m=n.n(p),f=n(160),d=n(159),E=n(156),g=n(143),v=n(151),h=n(152),b=n(73),O=n.n(b),S=n(155),y=n(50),D=n(70),j=n(11),C=n(33),w=n(34),T=n(38),I=n(35),N=n(39),_=n(19),k=n(5),P=n(76),x=n(157),A=n(144),R=n(145),U=n(149),J=n(148),G=n(146),B=n(147),V=n(68),L=n.n(V),F={SET_SPACE_OCCUPIER:"SET_SPACE_OCCUPIER"},M={GET_DEVICES_REQUEST:"GET_DEVICES_REQUEST",GET_DEVICES_SUCCESS:"GET_DEVICES_SUCCESS",GET_DEVICES_FAILURE:"GET_DEVICES_FAILURE"},H={setSpaceOccupier:function(e,t){return function(n){n(function(e,t){return{type:F.SET_SPACE_OCCUPIER,occupier:e,selectedDevice:t}}(e,t))}}};var Q={getDevices:function(e){var t={method:"GET",mode:"cors",headers:{Authorization:e,"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"},body:null};return fetch("http://".concat(W,"/device/get"),t).then(Z)}},W="selftunnel.in:5000";function Z(e){return e.json().then((function(t){if(!e.ok){403===e.status&&(console.log("403"),localStorage.removeItem("user"),window.location.reload(!0));var n=t&&t.message||e.statusText;return Promise.reject(n)}return t}))}var z={loginEmail:function(e,t){var n={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({email:e,password:t})};return fetch("http://".concat(X,"/auth/login"),n).then(K)},getAccessToken:function(e){var t={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({refreshToken:e})};return fetch("http://".concat(X,"/auth/getAccessToken"),t).then(K)}},X="selftunnel.in:5000";function K(e){return e.json().then((function(t){if(!e.ok){403===e.status&&(console.log("403"),localStorage.removeItem("user"),window.location.reload(!0));var n=t&&t.message||e.statusText;return Promise.reject(n)}return t}))}var Y={getDevices:function(){return function(e){e({type:M.GET_DEVICES_REQUEST}),z.loginEmail("vishnu@astralpresence.in","password").then((function(t){var n=(t=t.message).substring(2),a=n.substring(0,n.length-1);z.getAccessToken(a).then((function(t){var n=(t=t.message).substring(2),a=n.substring(0,n.length-1);Q.getDevices(a).then((function(t){e(function(e){return{type:M.GET_DEVICES_SUCCESS,devices:e}}(t.message))}),(function(t){e(function(e){return{type:M.GET_DEVICES_FAILURE,error:e}}(t.toString()))}))}))}))}}};var $=Object(k.a)({root:{"& label.Mui-focused":{color:"#546463"},"& label":{color:"#546463"},"& .MuiInput-underline:after":{borderBottomColor:"#546463"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#546463"},"&:hover fieldset":{borderColor:"#546463"},"&.Mui-focused fieldset":{borderColor:"#546463"}}}})(x.a);function q(e,t){return{port:e,status:t}}q("8080","Good"),q("5000","Bad"),Object(P.a)({palette:{primary:{light:"#ffffff",main:"#ffffff",dark:"#ffffff",contrastText:"#ffffff"}}});var ee=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(r)))).getDeviceTunnels=function(e){return e.name===n.props.selectedDevice},n}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=m()({padding10:!0}),t=m()({width100:!0,textCenter:!0}),n=m()({flexDisplay:!0,vAlignMiddle:!0,marginBottom16:!0}),a=this.props.classes;return r.a.createElement("div",{className:m()(a.root,e)},r.a.createElement(L.a,{className:a.closeIcon,onClick:this.props.closeDetails}),r.a.createElement("h4",{className:m()("margin0",t,"colorSecondary")},this.props.selectedDevice),r.a.createElement("div",{className:n},r.a.createElement($,{id:"deviceName",label:"Name",className:a.textField,type:"email",name:"deviceName",margin:"normal",variant:"outlined",InputProps:{className:a.input}}),r.a.createElement(A.a,{variant:"contained",className:a.button},"Save")),r.a.createElement(R.a,{className:a.table,border:"2"},r.a.createElement(G.a,null,r.a.createElement(B.a,null,r.a.createElement(J.a,null,r.a.createElement("strong",null,"Source Port")),r.a.createElement(J.a,{align:"right"},r.a.createElement("strong",null,"Destination Port")))),r.a.createElement(U.a,null,this.props.devices.find(this.getDeviceTunnels).tunnels.map((function(e){return r.a.createElement(B.a,{key:e.name},r.a.createElement(J.a,{align:"right"},e.sourcePort),r.a.createElement(J.a,{align:"right"},e.destinationPort))})))))}}]),t}(r.a.Component),te=Object(_.b)((function(e){return{selectedDevice:e.routing.selectedDevice,devices:e.device.devices}}),(function(e){return{closeDetails:function(){e(H.setSpaceOccupier("deviceList",null))}}}))(Object(k.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},button:{margin:e.spacing(1),maxHeight:"50px",marginTop:"19px"},root:{border:"1px solid gray !important",position:"relative",marginTop:"64px !important"},input:{color:"#546463"},closeIcon:{position:"absolute",top:"10px",right:"10px",color:"#546463"}}}),{withTheme:!0})(ee)),ne=n(104),ae=n(69),re=n.n(ae);function ce(e,t,n){return{name:e,calories:t,fat:n}}ce("Device1","AHCBDJ1238","167.237.233.876"),ce("Device2","DSHBFS2389","167.237.233.890");var oe=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(T.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(r)))).editDevice=function(e){console.log(e),n.props.setOccupier("deviceDetails",e)},n}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.getDevices()}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(ne.a,{className:t.root},this.props.receivedDevices?r.a.createElement(R.a,{className:t.table,border:"2"},r.a.createElement(G.a,null,r.a.createElement(B.a,null,r.a.createElement(J.a,null,r.a.createElement("strong",null,"Name")),r.a.createElement(J.a,{align:"right"},r.a.createElement("strong",null,"Device ID")),r.a.createElement(J.a,{align:"right"},r.a.createElement("strong",null,"Tunnels")))),r.a.createElement(U.a,null,this.props.devices.map((function(t){return r.a.createElement(B.a,{key:t.name},r.a.createElement(J.a,{component:"th",scope:"row",className:"vAlignMiddle"},t.name," \xa0",r.a.createElement(re.a,{className:"deviceEditIconContainer",onClick:function(){return e.editDevice(t.name)}})),r.a.createElement(J.a,{align:"right"},t.deviceID),r.a.createElement(J.a,{align:"right"},t.tunnels.length))})))):null)}}]),t}(r.a.Component),ie=Object(_.b)((function(e){var t=e.auth.accessToken,n=e.device;return{accessToken:t,devices:n.devices,receivedDevices:n.receivedDevices}}),(function(e){return{setOccupier:function(t,n){e(H.setSpaceOccupier(t,n))},getDevices:function(t){e(Y.getDevices(t))}}}))(Object(k.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto",background:"rgba(0,0,0,0)"},table:{}}}),{withTheme:!0})(oe)),le=function(e){function t(){return Object(C.a)(this,t),Object(T.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return"deviceList"===this.props.spaceOccupier?r.a.createElement(ie,null):"deviceDetails"===this.props.spaceOccupier?r.a.createElement(te,null):void 0}}]),t}(r.a.Component),se=Object(_.b)((function(e){return{spaceOccupier:e.routing.spaceOccupier}}),null)(le),ue=n(150),pe=n(72),me=n.n(pe),fe=n(71),de=n.n(fe),Ee=Object(D.a)((function(e){var t;return{root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:(t={marginLeft:240},Object(l.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),Object(l.a)(t,"background","#29A6A2"),t),menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}}));var ge=Object(_.b)(null,(function(e){return{closeDetails:function(){e(H.setSpaceOccupier("deviceList",null))}}}))((function(e){var t=e.container,n=Ee(),a=Object(j.a)(),c=r.a.useState(!1),o=Object(i.a)(c,2),l=o[0],p=o[1],b=function(){p(!l)},D=r.a.createElement("div",{className:"maxW100"},r.a.createElement("div",{className:m()(n.toolbar,"borderBottom","padding2","maxH64","textCenter","logoDiv")},r.a.createElement("img",{src:"images/selftunnel-darkbg@2x.png",alt:"Self Tunnel",className:"maxH60"}),r.a.createElement("p",{className:m()("margin0","whiteText","initialFont","emailDisplay")},"vishnu@gmail.com")),r.a.createElement(ue.a,null),r.a.createElement(g.a,null,r.a.createElement("div",null,r.a.createElement(v.a,{button:!0,key:"Devices",className:m()("borderBottom","colorSecondary"),onClick:function(){e.closeDetails(),!0===l&&p(!l)}},r.a.createElement(de.a,null)," \xa0 \xa0",r.a.createElement(h.a,{primary:"Devices"}))),r.a.createElement(ue.a,null),r.a.createElement("div",null,r.a.createElement(v.a,{button:!0,key:"Accounts",className:m()("borderBottom","colorSecondary")},r.a.createElement(me.a,null)," \xa0 \xa0",r.a.createElement(h.a,{primary:"Accounts"}))),r.a.createElement(ue.a,null)));return r.a.createElement("div",{className:n.root},r.a.createElement(u.a,null),r.a.createElement(s.a,{position:"fixed",className:n.appBar},r.a.createElement(S.a,null,r.a.createElement(E.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:b,className:n.menuButton},r.a.createElement(O.a,null)),r.a.createElement(y.a,{variant:"h6",noWrap:!0}))),r.a.createElement("nav",{className:n.drawer,"aria-label":"mailbox folders"},r.a.createElement(d.a,{smUp:!0,implementation:"css"},r.a.createElement(f.a,{container:t,variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:l,onClose:b,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},D)),r.a.createElement(d.a,{xsDown:!0,implementation:"css"},r.a.createElement(f.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},D))),r.a.createElement("main",{className:n.content},r.a.createElement(se,null)))}));var ve=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(ge,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=n(78),be=(Object(he.a)(),n(29)),Oe=n(74),Se=n(75);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var De={spaceOccupier:"deviceList",selectedDevice:null};function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ce={accessToken:"b'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NjMyNTgzMDEsImVtYWlsIjoidmlzaG51QGFzdHJhbHByZXNlbmNlLmluIn0.2P-uo-rcgO1prkPrvnbromZW11DCgtcwRPJhGOi47fQ'",email:"vishnu@gmail.com"};var we={receivedDevices:!1,devices:[]};var Te=Object(be.c)({routing:function(e,t){if("undefined"===typeof e)return De;switch(t.type){case F.SET_SPACE_OCCUPIER:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{spaceOccupier:t.occupier,selectedDevice:t.selectedDevice});default:return e}},auth:function(e,t){if("undefined"===typeof e)return Ce;switch(t.type){case F.NONE:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{spaceOccupier:t.occupier,selectedDevice:t.selectedDevice});default:return e}},device:function(e,t){if("undefined"===typeof e)return we;switch(t.type){case M.GET_DEVICES_REQUEST:return{};case M.GET_DEVICES_SUCCESS:return{devices:t.devices,receivedDevices:!0};case M.GET_DEVICES_REQUEST:return{};default:return e}}}),Ie="USERS_REFRESH_REQUEST",Ne="USERS_REFRESH_SUCCESS",_e="USERS_REFRESH_FAILURE",ke={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).refresh_token:null,client_id:"rTZ61c51XXJriPBSoGReIeZ7W7MjWy"})};var Pe=Object(Se.createLogger)(),xe=Object(be.d)(Te,Object(be.a)(Oe.a,Pe,(function(e){return function(t){return function(n){if("INVALID_ACCESS_TOKEN"===n.type)e.dispatch({type:Ie}),fetch("https://care-api-staging.appspot.com/oauth2/tokens",ke).then((function(e){return e.json()})).then((function(t){if(t.access_token){var n=JSON.parse(localStorage.getItem("user"));t.allCommunities=n.allCommunities,localStorage.setItem("user",JSON.stringify(t)),e.dispatch(function(e){return{type:Ne,user:e}}(t))}}),(function(t){e.dispatch(function(e){return{type:_e,error:e}}(t.toString()))}));else if(n.type===(Ie||Ne||_e))t(n);else{var a=JSON.parse(localStorage.getItem("user"))&&JSON.parse(localStorage.getItem("user")).access_expiration,r=JSON.parse(localStorage.getItem("user"))&&JSON.parse(localStorage.getItem("user")).refresh_expiration,c=new Date(a+"Z"),o=new Date(r+"Z"),i=new Date;if(c<i&&i<o)e.dispatch({type:"INVALID_ACCESS_TOKEN"});else{if(!(o<i))return t(n);localStorage.removeItem("user")}}}}})));var Ae=n(161),Re=Object(P.a)({palette:{type:"light",primary:{main:"#000000"},secondary:{main:"#485362"}}});o.a.render(r.a.createElement(Ae.a,{theme:Re},r.a.createElement(_.a,{store:xe},r.a.createElement(ve,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},89:function(e,t,n){e.exports=n(102)},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.0b709039.chunk.js.map